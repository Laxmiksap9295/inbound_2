var oThat;sap.ui.define(["sap/ui/core/mvc/Controller","sap/ui/model/json/JSONModel","sap/m/MessageBox","sap/ui/model/Filter","sap/ui/model/FilterOperator","sap/m/BusyDialog","sap/m/MessageToast"],function(e,t,o,a,n,s,i){"use strict";return e.extend("ZGT_MM_INBOUND.controller.PreQuality_Exception",{onInit:function(){oThat=this;this.oRouter=sap.ui.core.UIComponent.getRouterFor(this);this.oRouter.getRoute("PreQualityException").attachMatched(this._onRouteMatched,this)},_onRouteMatched:function(e){oThat=this;oThat._loadExceptionData()},onNavBack:function(){oThat.oRouter.navTo("Inbound")},_loadExceptionData:function(){var e=this.getOwnerComponent().getModel();oThat.BusyDialog=new s;oThat.BusyDialog.open();e.read("/GetPreQualExpSet",{success:function(e){oThat.BusyDialog.close();var o=new t(e.results);this.getView().setModel(o,"ExceptionModel")}.bind(this),error:function(e){oThat.BusyDialog.close();o.error(e.responseText)}})},onReviewExceptionPress:function(e){var t=e.getSource().getBindingContext("ExceptionModel");oThat.oObject=t.getObject();oThat.byId("idGradeChange").setValue(oThat.oObject.Grade);oThat.byId("idSurcharge").setValue(oThat.oObject.Surcharge);oThat.byId("idReason").setValue(oThat.oObject.Reason);oThat.byId("idExceptionDialog").open()},onApprove:function(){oThat._updateWBIDStatus("A")},onReject:function(){oThat._updateWBIDStatus("R")},_updateWBIDStatus:function(e){var t=this.getOwnerComponent().getModel();var a=oThat.oObject;oThat.BusyDialog=new s;oThat.BusyDialog.open();var n={IAppname:"QC",ICharg:a.Batch,IWbid:a.WbId,IItem:a.Item,IWerks:a.Werks,IMatnr:a.Material,IEbeln:a.Ebeln,IEbelp:a.Ebelp,Grade:oThat.byId("idGradeChange").getValue(),Surcharge:oThat.byId("idSurcharge").getValue(),PoChange:oThat.byId("idPONumber").getValue(),Reason:oThat.byId("idReason").getValue(),IApprove:e,PostBatchCharNav:[],PostReturnNav:[]};t.create("/PostBatchSet",n,{success:function(e){oThat.byId("idExceptionDialog").close();oThat.BusyDialog.close();if(e.PostReturnNav.results[0].Type==="S"){o.success(e.PostReturnNav.results[0].Message,{icon:o.Icon.SUCCESS,actions:[o.Action.OK],onClose:function(e){if(e=="OK"){oThat._onRouteMatched()}}})}else{o.error(e.PostReturnNav.results[0].Message)}},error:function(e){oThat.BusyDialog.close();o.error(e.responseText)}})},onREclose:function(){oThat.byId("idExceptionDialog").close()}})});
//# sourceMappingURL=PreQuality_Exception.controller.js.map