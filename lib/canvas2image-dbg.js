var Canvas2Image=function(){var e=function(){var e=document.createElement("canvas"),t=e.getContext("2d");return{canvas:!!t,imageData:!!t.getImageData,dataURL:!!e.toDataURL,btoa:!!window.btoa}}();var t="image/octet-stream";function n(e,t,n){var a=e.width,r=e.height;if(t==undefined){t=a}if(n==undefined){n=r}var o=document.createElement("canvas");var i=o.getContext("2d");o.width=t;o.height=n;i.drawImage(e,0,0,a,r,0,0,t,n);return o}function a(e,t,a,r){e=n(e,a,r);return e.toDataURL(t)}function r(e,t){var n=document.createElement("a");n.href=e;n.download=t;var a=new MouseEvent("click",{bubbles:false,cancelable:false});n.dispatchEvent(a)}function o(e){var t=document.createElement("img");t.src=e;return t}function i(e){e=e.toLowerCase().replace(/jpg/i,"jpeg");var t=e.match(/png|jpeg|bmp|gif/)[0];return"image/"+t}function v(e){if(!window.btoa){throw"btoa undefined"}var t="";if(typeof e=="string"){t=e}else{for(var n=0;n<e.length;n++){t+=String.fromCharCode(e[n])}}return btoa(t)}function u(e){var t=e.width,n=e.height;return e.getContext("2d").getImageData(0,0,t,n)}function f(e,t){return"data:"+t+";base64,"+e}var c=function(e){var t=e.width;var n=e.height;var a=t*n*3;var r=a+54;var o=[66,77,r&255,r>>8&255,r>>16&255,r>>24&255,0,0,0,0,54,0,0,0];var i=[40,0,0,0,t&255,t>>8&255,t>>16&255,t>>24&255,n&255,n>>8&255,n>>16&255,n>>24&255,1,0,24,0,0,0,0,0,a&255,a>>8&255,a>>16&255,a>>24&255,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];var u=(4-t*3%4)%4;var f=e.data;var c="";var d=t<<2;var g=n;var m=String.fromCharCode;do{var s=d*(g-1);var l="";for(var h=0;h<t;h++){var p=h<<2;l+=m(f[s+p+2])+m(f[s+p+1])+m(f[s+p])}for(var w=0;w<u;w++){l+=String.fromCharCode(0)}c+=l}while(--g);var b=v(o.concat(i))+v(c);return b};var d=function(o,v,d,g,m){if(e.canvas&&e.dataURL){if(typeof o=="string"){o=document.getElementById(o)}if(g==undefined){g="png"}m=m==undefined||m.length===0?Date.now()+"."+g:m+"."+g;g=i(g);if(/bmp/.test(g)){var s=u(n(o,v,d));var l=c(s);r(f(l,downloadMimedownloadMime),m)}else{var l=a(o,g,v,d);r(l.replace(g,t),m)}}};var g=function(t,r,v,d){if(e.canvas&&e.dataURL){if(typeof t=="string"){t=document.getElementById(t)}if(d==undefined){d="png"}d=i(d);if(/bmp/.test(d)){var g=u(n(t,r,v));var m=c(g);return o(f(m,"image/bmp"))}else{var m=a(t,d,r,v);return o(m)}}};return{saveAsImage:d,saveAsPNG:function(e,t,n,a){return d(e,t,n,"png",a)},saveAsJPEG:function(e,t,n,a){return d(e,t,n,"jpeg",a)},saveAsGIF:function(e,t,n,a){return d(e,t,n,"gif",a)},saveAsBMP:function(e,t,n,a){return d(e,t,n,"bmp",a)},convertToImage:g,convertToPNG:function(e,t,n){return g(e,t,n,"png")},convertToJPEG:function(e,t,n){return g(e,t,n,"jpeg")},convertToGIF:function(e,t,n){return g(e,t,n,"gif")},convertToBMP:function(e,t,n){return g(e,t,n,"bmp")}}}();
//# sourceMappingURL=canvas2image-dbg.js.map