(function(t,i){if(typeof define==="function"&&define.amd){define([],function(){return t["SignaturePad"]=i()})}else if(typeof exports==="object"){module.exports=i()}else{t["SignaturePad"]=i()}})(this,function(){
/*!
	 * Signature Pad v1.5.3
	 * https://github.com/szimek/signature_pad
	 *
	 * Copyright 2016 Szymon Nowak
	 * Released under the MIT license
	 *
	 * The main idea and some parts of the code (e.g. drawing variable width BÃ©zier curve) are taken from:
	 * http://corner.squareup.com/2012/07/smoother-signatures.html
	 *
	 * Implementation of interpolation using cubic BÃ©zier curves is taken from:
	 * http://benknowscode.wordpress.com/2012/09/14/path-interpolation-using-cubic-bezier-and-control-point-estimation-in-javascript
	 *
	 * Algorithm for approximated length of a BÃ©zier curve is taken from:
	 * http://www.lemoda.net/maths/bezier-length/index.html
	 *
	 */
var t=function(t){"use strict";var i=function(t,i){var e=this,n=i||{};this.velocityFilterWeight=n.velocityFilterWeight||.7;this.minWidth=n.minWidth||.5;this.maxWidth=n.maxWidth||2.5;this.dotSize=n.dotSize||function(){return(this.minWidth+this.maxWidth)/2};this.penColor=n.penColor||"black";this.backgroundColor=n.backgroundColor||"rgba(255, 250, 193,0)";this.onEnd=n.onEnd;this.onBegin=n.onBegin;this._canvas=t;if(this._canvas){if(t.getContext("2d")){this._ctx=t.getContext("2d")}}this.clear();this._handleMouseDown=function(t){if(t.which===1){e._mouseButtonDown=true;e._strokeBegin(t)}};this._handleMouseMove=function(t){if(e._mouseButtonDown){e._strokeUpdate(t)}};this._handleMouseUp=function(t){if(t.which===1&&e._mouseButtonDown){e._mouseButtonDown=false;e._strokeEnd(t)}};this._handleTouchStart=function(t){if(t.targetTouches.length==1){var i=t.changedTouches[0];e._strokeBegin(i)}};this._handleTouchMove=function(t){t.preventDefault();var i=t.targetTouches[0];e._strokeUpdate(i)};this._handleTouchEnd=function(t){var i=t.target===e._canvas;if(i){t.preventDefault();e._strokeEnd(t)}};this._handleMouseEvents();this._handleTouchEvents()};i.prototype.clear=function(){if(this._ctx){var t=this._ctx,i=this._canvas;t.fillStyle=this.backgroundColor;t.clearRect(0,0,i.width,i.height);t.fillRect(0,0,i.width,i.height);this._reset()}};i.prototype.toDataURL=function(t,i){if(this._canvas){var e=this._canvas;return e.toDataURL.apply(e,arguments)}};i.prototype.fromDataURL=function(t){if(this._ctx){var i=this,e=new Image,n=window.devicePixelRatio||1,o=this._canvas.width/n,s=this._canvas.height/n;this._reset();e.src=t;e.onload=function(){i._ctx.drawImage(e,0,0,o,s)};this._isEmpty=false}};i.prototype._strokeUpdate=function(t){var i=this._createPoint(t);this._addPoint(i)};i.prototype._strokeBegin=function(t){this._reset();this._strokeUpdate(t);if(typeof this.onBegin==="function"){this.onBegin(t)}};i.prototype._strokeDraw=function(t){if(this._ctx){var i=this._ctx,e=typeof this.dotSize==="function"?this.dotSize():this.dotSize;i.beginPath();this._drawPoint(t.x,t.y,e);i.closePath();i.fill()}};i.prototype._strokeEnd=function(t){var i=this.points.length>2,e=this.points[0];if(!i&&e){this._strokeDraw(e)}if(typeof this.onEnd==="function"){this.onEnd(t)}};i.prototype._handleMouseEvents=function(){if(this._canvas){this._mouseButtonDown=false;this._canvas.addEventListener("mousedown",this._handleMouseDown);this._canvas.addEventListener("mousemove",this._handleMouseMove);t.addEventListener("mouseup",this._handleMouseUp)}};i.prototype._handleTouchEvents=function(){if(this._canvas){this._canvas.style.msTouchAction="none";this._canvas.style.touchAction="none";this._canvas.addEventListener("touchstart",this._handleTouchStart);this._canvas.addEventListener("touchmove",this._handleTouchMove);this._canvas.addEventListener("touchend",this._handleTouchEnd)}};i.prototype.on=function(){this._handleMouseEvents();this._handleTouchEvents()};i.prototype.off=function(){if(this._canvas){this._canvas.removeEventListener("mousedown",this._handleMouseDown);this._canvas.removeEventListener("mousemove",this._handleMouseMove);t.removeEventListener("mouseup",this._handleMouseUp);this._canvas.removeEventListener("touchstart",this._handleTouchStart);this._canvas.removeEventListener("touchmove",this._handleTouchMove);this._canvas.removeEventListener("touchend",this._handleTouchEnd)}};i.prototype.isEmpty=function(){return this._isEmpty};i.prototype._reset=function(){if(this._ctx){this.points=[];this._lastVelocity=0;this._lastWidth=(this.minWidth+this.maxWidth)/2;this._isEmpty=true;this._ctx.fillStyle=this.penColor}};i.prototype._createPoint=function(t){if(this._canvas){var i=this._canvas.getBoundingClientRect();return new e(t.clientX-i.left,t.clientY-i.top)}};i.prototype._addPoint=function(t){var i=this.points,e,o,s,h;i.push(t);if(i.length>2){if(i.length===3)i.unshift(i[0]);h=this._calculateCurveControlPoints(i[0],i[1],i[2]);e=h.c2;h=this._calculateCurveControlPoints(i[1],i[2],i[3]);o=h.c1;s=new n(i[1],e,o,i[2]);this._addCurve(s);i.shift()}};i.prototype._calculateCurveControlPoints=function(t,i,n){var o=t.x-i.x,s=t.y-i.y,h=i.x-n.x,a=i.y-n.y,r={x:(t.x+i.x)/2,y:(t.y+i.y)/2},c={x:(i.x+n.x)/2,y:(i.y+n.y)/2},u=Math.sqrt(o*o+s*s),d=Math.sqrt(h*h+a*a),l=r.x-c.x,_=r.y-c.y,f=d/(u+d),v={x:c.x+l*f,y:c.y+_*f},p=i.x-v.x,y=i.y-v.y;return{c1:new e(r.x+p,r.y+y),c2:new e(c.x+p,c.y+y)}};i.prototype._addCurve=function(t){var i=t.startPoint,e=t.endPoint,n,o;n=e.velocityFrom(i);n=this.velocityFilterWeight*n+(1-this.velocityFilterWeight)*this._lastVelocity;o=this._strokeWidth(n);this._drawCurve(t,this._lastWidth,o);this._lastVelocity=n;this._lastWidth=o};i.prototype._drawPoint=function(t,i,e){if(this._ctx){var n=this._ctx;n.moveTo(t,i);n.arc(t,i,e,0,2*Math.PI,false);this._isEmpty=false}};i.prototype._drawCurve=function(t,i,e){if(this._ctx){var n=this._ctx,o=e-i,s,h,a,r,c,u,d,l,_,f,v;s=Math.floor(t.length());n.beginPath();for(a=0;a<s;a++){r=a/s;c=r*r;u=c*r;d=1-r;l=d*d;_=l*d;f=_*t.startPoint.x;f+=3*l*r*t.control1.x;f+=3*d*c*t.control2.x;f+=u*t.endPoint.x;v=_*t.startPoint.y;v+=3*l*r*t.control1.y;v+=3*d*c*t.control2.y;v+=u*t.endPoint.y;h=i+u*o;this._drawPoint(f,v,h)}n.closePath();n.fill()}};i.prototype._strokeWidth=function(t){return Math.max(this.maxWidth/(t+1),this.minWidth)};var e=function(t,i,e){this.x=t;this.y=i;this.time=e||(new Date).getTime()};e.prototype.velocityFrom=function(t){return this.time!==t.time?this.distanceTo(t)/(this.time-t.time):1};e.prototype.distanceTo=function(t){return Math.sqrt(Math.pow(this.x-t.x,2)+Math.pow(this.y-t.y,2))};var n=function(t,i,e,n){this.startPoint=t;this.control1=i;this.control2=e;this.endPoint=n};n.prototype.length=function(){var t=10,i=0,e,n,o,s,h,a,r,c;for(e=0;e<=t;e++){n=e/t;o=this._point(n,this.startPoint.x,this.control1.x,this.control2.x,this.endPoint.x);s=this._point(n,this.startPoint.y,this.control1.y,this.control2.y,this.endPoint.y);if(e>0){r=o-h;c=s-a;i+=Math.sqrt(r*r+c*c)}h=o;a=s}return i};n.prototype._point=function(t,i,e,n,o){return i*(1-t)*(1-t)*(1-t)+3*e*(1-t)*(1-t)*t+3*n*(1-t)*t*t+o*t*t*t};return i}(document);return t});
//# sourceMappingURL=signature.js.map